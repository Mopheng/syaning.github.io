---
layout: post
title:  前端工程化的一些思考
date:   2015-10-15
---

相关：
- 依赖管理 npm bower
- 预编译
- 模块化
- 组件化
- 合并，压缩，测试，优化，代码质量检验
- 文件hash，缓存，sourcemap
- 自动化构建（打包，部署）grunt gulp fis3

参考文章：
- [Web 研发模式演变](https://github.com/lifesinger/lifesinger.github.io/issues/184)

### 1. 前端开发模式的变迁

近几年来，前端开发迅速发展，也越来越向着工程化的方向迈进。在了解前端工程化之前，有必要先回顾一下前端开发模式的变迁。

**（1）纯静态阶段**

这是最简单的开发模式，即只有静态内容的展示，没有数据库，也不需要与后台有任何交互。这种情况下通常有着如下的项目结构：

```
/--css
   /--a.css
   /--b.css
/--js
   /--c.js
   /--d.js
/--index.html
```

页面内容也通常如下，即一次性加载所有的脚本和样式：

```html
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="css/a.css">
	<link rel="stylesheet" href="css/b.css">
	<script src="js/c.js"></script>
	<script src="js/d.js"></script>
</head>
<body>
	<!-- content -->
</body>
</html>
```

这种模式是最简单粗暴的，复杂度最低。但是其适用场景非常有限，通常来说，只适合做一些Demo展示，或者非常简单的项目。

**（2）混乱的前后端**

通常来说，大部分的Web项目都会需要数据库，涉及到与后台的交互。在这种情况下，静态页面已经无法胜任，于是通过JSP等方式来完成后台数据的获取。在该阶段，项目的目录结构通常为如下形式：

```
/--css
   /--...
/--js
   /--...
/--index.jsp
/--somePage.jsp
```

JSP允许在HTML代码中嵌入Java代码，非常强大，但是使用起来也很混乱。在大多数情况下，不可避免地，JSP页面中会涉及到一部分的业务逻辑。因此在该阶段，前后端的界限就比较模糊，前端开发也处于一个非常尴尬的地位。

**（3）后端MVC**

随着技术的不断发展，后端进入了MVC阶段，从而实现数据模型、视图和控制器的分离。比较知名的框架例如Struts，SpringMVC等。可以注意到，在之前的两个阶段，用户访问的URL地址是比较依赖于物理文件的。而在这一阶段，用户可以比较方便灵活地定义路由了。

较上一阶段，前后端的界限相对明确了许多。在该阶段，前端通常是通过Velocity、Freemaker等各种模板技术来实现MVC中得V部分。相对而言，此时前端开发可能涉及到的业务逻辑大大减少。但是对于前端开发而言，依然存在着很多不便。一是路由定义由后端来实现，而事实上前端才是路由敏感的；二是前端开发严重依赖于后端环境，不太容易进行独立开发。

**（4）Ajax**
js不仅仅是特效，开始涉及逻辑

**（5）MV***
逻辑分层

**（6）模块化，组件化，自动化**
更细粒度，更加规范